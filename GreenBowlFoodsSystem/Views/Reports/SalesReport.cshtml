@model IEnumerable<GreenBowlFoodsSystem.Models.Invoice>

@{
    ViewData["Title"] = "Sales Revenue Report";
    decimal totalRevenue = ViewBag.TotalRevenue ?? 0;
}

<div class="d-flex justify-content-between align-items-center mb-4 d-print-none animate-fade-up">
    <div>
        <h2 class="text-white">💰 Sales Revenue</h2>
        <p class="text-muted">Only showing <span class="badge bg-success">PAID</span> invoices.</p>
    </div>
    
    <div class="d-flex gap-2">
        <a asp-action="Index" class="btn btn-outline-light rounded-pill px-4">
            <i class="bi bi-arrow-left me-2"></i> Back to Reports
        </a>
        
        <button onclick="window.print()" class="btn btn-primary rounded-pill px-4">
            <i class="bi bi-printer-fill me-2"></i> Print Financials
        </button>
    </div>
</div>

<div class="d-none d-print-block text-center mb-4">
    <h1>Financial Sales Report</h1>
    <h3>Total Revenue: @totalRevenue.ToString("C")</h3>
    <p>Generated: @DateTime.Now.ToString("dd MMM yyyy HH:mm")</p>
    <hr />
</div>

<div class="card border-0 shadow">
    <div class="card-body p-0">
        <div class="table-responsive">
            <table class="table table-hover align-middle mb-0">
                <thead class="table-secondary">
                    <tr>
                        <th class="ps-4">Invoice #</th>
                        <th>Date</th>
                        <th>Customer</th>
                        <th>Status</th>
                        <th class="text-end pe-4">Amount</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                        <tr>
                            <td class="ps-4 fw-bold text-primary">@item.InvoiceNumber</td>
                            <td>@item.Date.ToString("yyyy-MM-dd")</td>
                            <td>@item.Customer?.CustomerName</td>
                            <td><span class="badge bg-success rounded-pill">PAID</span></td>
                            <td class="text-end fw-bold pe-4">£@item.TotalAmount</td>
                        </tr>
                    }
                </tbody>
                <tfoot class="table-dark">
                    <tr>
                        <td colspan="4" class="text-end fw-bold fs-5 pe-3">TOTAL REVENUE:</td>
                        <td class="text-end fw-bold fs-5 text-success pe-4">£@totalRevenue</td>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
</div>

<style>
    /* CSS specifically for high-quality financial printing */
    @@media print {
        body { background-color: white !important; color: black !important; }
        .table-secondary { background-color: #ddd !important; color: black !important; }
        .text-white { color: black !important; }
        .table-dark { background-color: #333 !important; color: white !important; }
        .text-primary { color: black !important; }
        .text-success { color: black !important; font-weight: bold; }
        .btn, .d-print-none { display: none !important; }
        .card { border: none !important; box-shadow: none !important; }
    }
</style>